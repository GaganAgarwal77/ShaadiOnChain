{"version":3,"sources":["app/Purchase.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js","app/services/utility.js"],"names":["i","Purchase","props","goBack","useHistory","itemID","match","params","itemId","useState","tokenId","name","description","image","creator","owner","price","ringType","creatorName","data","setData","useEffect","getRingItem","RingDetails","getMetadataFromTokenId","metadata","getImageFromTokenId","getUser","user","prevData","fetchData","purchase","event","purchaseRing","window","alert","location","href","className","style","width","src","onClick","alt","slice","web3","utils","fromWei","height","ownKeys","object","enumerableOnly","keys","Object","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread2","target","arguments","length","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","getURI","tokenURI","uri","substring","uriToImageConverter","axios","result","getLoveLetterImageFromTokenId","tokenURILoveLetter","cid","getMarriageCertURI","marriageCertificateTokenURI","getImageFromMarriageCertTokenId","getTreeImageFromTokenId","tokenURITree","getImageFromCID","dataURItoBlob","dataURI","byteString","atob","split","ab","ArrayBuffer","ia","Uint8Array","charCodeAt","Blob","type","getGeneralContractURI","tokenUri","getMetadataFromGeneralContractTokenUri","tokenUriCID"],"mappings":"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","file":"static/js/27.545d0708.chunk.js","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport '../assets/Purchase.css'\nimport { useHistory } from 'react-router-dom'\nimport { web3, getUser, getRingItem, purchaseRing } from \"./services/web3\";\nimport { getImageFromTokenId, getMetadataFromTokenId } from \"./services/utility\";\n\nfunction Purchase(props) {\n    const { goBack } = useHistory()\n\n    const itemID = props.match.params.itemId;\n\n    const [data, setData] = useState({\n        itemId: \"\",\n        tokenId: \"\",\n        name: \"\",\n        description: \"\",\n        image: \"\",\n        creator: \"\",\n        owner: \"\",\n        price: \"\",\n        ringType: \"\",\n        creatorName: \"\",\n    });\n\n    useEffect(() => {\n        const fetchData = async () => {\n            var RingDetails = await getRingItem(itemID);\n\n            const metadata = await getMetadataFromTokenId(RingDetails.tokenId);\n            const image = await getImageFromTokenId(RingDetails.tokenId);\n            const user = await getUser(RingDetails.creator);\n\n            setData(prevData => ({\n                ...prevData,\n                itemId: RingDetails.itemId,\n                tokenId: RingDetails.tokenId,\n                name: metadata.name,\n                description: metadata.description,\n                image: image,\n                creator: RingDetails.creator,\n                owner: RingDetails.owner,\n                price: RingDetails.price,\n                ringType: metadata.ringType,\n                creatorName: user.name,\n            }));\n          };\n\n        fetchData();\n    },[itemID]);\n\n    const purchase = async (event) => {\n        const status = await purchaseRing(data.itemId, data.price);\n        if(status) {\n            window.alert(\"Purchase is successfully completed!\");\n            window.location.href =\"/#/dashboard\"\n        }\n    }\n\n\n    return (\n            <div className='purchase'>\n                <div className=\"goback\">    \n                   <img style={{width:\"48px\"}} src=\"/ShaadiOnChain/assets/images/wedding-img/icon/left-arrow3.png\" onClick={goBack} alt=\"Go back\" className='gobackButton'/>   \n                </div> \n                <div> \n                \n                </div> \n                <div className=\"purchase__artwork\">\n                    <img src={data.image} alt=\"Ring NFT\" />\n                </div>\n\n                <div className=\"purchase__details\">\n                    <h1>#{data.tokenId} {data.name}</h1>\n                    <h3>{data.description}</h3>\n                    <h4>Creator: {data.creatorName}</h4>\n                    <h4>Current Owner: {data.owner.slice(0,10)}...</h4>\n                    <h4>{data.ringType} Ring</h4>\n                    <div className=\"purchase__detailsBuy\">\n                        <div className=\"value\">\n                            <h2>{web3.utils.fromWei(data.price)}</h2> \n                            <img src=\"/ShaadiOnChain/assets/images/ethereum3.svg\" alt=\"ETH\" width=\"30\" height=\"30\" className='symbol' />\n                        </div>\n                        <button onClick={purchase}> Buy now</button>\n                    </div>\n                    \n                </div>\n            </div> \n    )\n}\n\nexport default Purchase\n","import defineProperty from \"./defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nexport default function _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}","import { tokenURI, tokenURILoveLetter, marriageCertificateTokenURI, tokenURITree } from \"./web3\";\nimport axios from 'axios';\n\nexport const getURI = async (tokenId) => {\n    var uri = await tokenURI(tokenId);\n    uri = uri.slice(7); \n    uri = uri.substring(0, uri.length - 14);\n    uri = 'https://' + uri + '.ipfs.dweb.link/metadata.json';\n    return uri\n}  \n\nexport const uriToImageConverter = (uri) => {\n    var image = uri.slice(7); \n    image = image.substring(0, image.length - 5);\n    image = 'https://' + image + '.ipfs.dweb.link/blob';\n    return image;\n}\n\nexport const getImageFromTokenId = async (tokenId) => {\n    const uri = await getURI(tokenId);\n    const result = await axios(uri);\n    const image = uriToImageConverter(result.data.image);\n    return image;\n}\n\nexport const getMetadataFromTokenId = async (tokenId) => {\n    const uri = await getURI(tokenId);\n    const result = await axios(uri);\n    return result.data;\n}\n\nexport const getLoveLetterImageFromTokenId = async (tokenId) => {\n    var cid = await tokenURILoveLetter(tokenId);\n    const image = 'https://' + cid + '.ipfs.dweb.link';\n    return image;\n}\n\nexport const getMarriageCertURI = async (tokenId) => {\n    var uri = await marriageCertificateTokenURI(tokenId);\n    uri = uri.slice(7); \n    uri = uri.substring(0, uri.length - 14);\n    uri = 'https://' + uri + '.ipfs.dweb.link/metadata.json';\n    return uri\n}  \n\nexport const getImageFromMarriageCertTokenId = async (tokenId) => {\n    const uri = await getMarriageCertURI(tokenId);\n    const result = await axios(uri);\n    const image = uriToImageConverter(result.data.image);\n    return image;\n}\n\nexport const getTreeImageFromTokenId = async (tokenId) => {\n    const cid = await tokenURITree(tokenId);\n    const image = getImageFromCID(cid);\n    return image;\n}\n\nexport const dataURItoBlob = (dataURI) => {\n    var byteString = atob(dataURI.split(',')[1]);\n    var ab = new ArrayBuffer(byteString.length);\n    var ia = new Uint8Array(ab);\n    for (var i = 0; i < byteString.length; i++) {\n        ia[i] = byteString.charCodeAt(i);\n    }\n    var bb = new Blob([ab], {type:'image/*'});\n    return bb;\n}\n\nexport const getGeneralContractURI = async (tokenUri) => {\n    var uri = tokenUri;\n    uri = uri.slice(7); \n    uri = uri.substring(0, uri.length - 14);\n    uri = 'https://' + uri + '.ipfs.dweb.link/metadata.json';\n    return uri\n  }  \n    \nexport const getMetadataFromGeneralContractTokenUri = async (tokenUri) => {\n    const uri = await getGeneralContractURI(tokenUri);\n    const result = await axios(uri);\n    return result.data;\n}\n  \nexport const getImageFromCID = (tokenUriCID) => {\n    return 'https://' + tokenUriCID + '.ipfs.dweb.link';\n}  "],"sourceRoot":""}